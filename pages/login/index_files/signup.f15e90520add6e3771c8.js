(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{343:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),s=(n(48),n(10)),i=n(0),c=n(78),o=n(47),p=n.n(o),l=n(4),u=n(1),h=n.n(u),d=n(55),b=n.n(d),v=n(147),f=(n(14),n(49),n(20),n(139),n(128),n(53),n(65),n(19),n(9),n(42),n(76),n(18),n(141),n(29),n(12)),m=n(24),y=n(2),g=n(22),j=n(27),x=n(7),S=n(34),O=n(31),w=n(17),k=n(77),C=n.n(k),V=n(351),A=(n(70),n(353)),I=n(352),N=n(66),_=n(71),P=n(1008),E=n(91),U=n(131);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(w.a)(e);if(t){var a=Object(w.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(O.a)(this,n)}}var F=function(e){Object(S.a)(n,e);var t=M(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).handleMailChange=r.handleMailChange.bind(Object(x.a)(r)),r.handlePasswordChange=r.handlePasswordChange.bind(Object(x.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.onUserInput("password","")}},{key:"handleMailChange",value:function(e){this.props.onUserInput("mail_address",e.target.value)}},{key:"handlePasswordChange",value:function(e){this.props.onUserInput("password",e.target.value)}},{key:"isValidMailAddress",value:function(){return this.isValidField("mail_address")}},{key:"isValidPassword",value:function(){return this.isValidField("password")}},{key:"isValidUserName",value:function(){return this.isValidField("user_name")}},{key:"isValidField",value:function(e){return!!this.props.validateServerSide&&void 0===this.props.errorsOnInputing[e]}},{key:"isSnsLoginOnly",value:function(){return"apple"===this.props.snsProviderId}},{key:"render",value:function(){return Object(i.jsxs)("form",{onSubmit:this.props.onFormSubmit,noValidate:!0,children:[Object(i.jsxs)("div",{className:"input-field-group",children:[Object(i.jsxs)("div",{className:"input-field",children:[Object(i.jsx)("input",{type:"email",placeholder:this.props.t(l.c.signupEmailStep.email),autoComplete:"email",autoCapitalize:"off",className:"gtm-mail-address",value:this.props.inputValues.mail_address,onChange:this.handleMailChange}),this.isValidMailAddress()&&Object(i.jsx)("div",{className:"valid"})]}),!this.isSnsLoginOnly()&&Object(i.jsxs)("div",{className:"input-field",children:[Object(i.jsx)("input",{type:"password",placeholder:this.props.t(l.c.signupEmailStep.password),autoComplete:U.a?"on":"new-password",autoCapitalize:"off",className:"gtm-password",defaultValue:"",onChange:this.handlePasswordChange}),this.isValidPassword()&&Object(i.jsx)("div",{className:"valid"})]})]}),Object(i.jsx)(E.a,{errors:this.props.errors,fieldNames:K.fieldNames}),Object(i.jsx)("button",{type:"submit",disabled:this.props.requestSending,className:"signup-form__submit",children:this.props.t(l.c.common.action.next)})]})}}]),n}(h.a.Component);F.displayName="SignupEmailStep";var K=Object(l.f)()(F);K.fieldNames=["mail_address","password","etc"];var D=K,R=(n(38),n(69),n(108),n(33),n(123),n(28),n(16),n(57),n(41),n(146)),T=n.n(R),L=n(92);function q(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw s}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(w.a)(e);if(t){var a=Object(w.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(O.a)(this,n)}}var W=function(e){Object(S.a)(n,e);var t=Y(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).isSelectedSexMale=r.isSelectedSexMale.bind(Object(x.a)(r)),r.isSelectedSexFemale=r.isSelectedSexFemale.bind(Object(x.a)(r)),r.isSelectedSexOthers=r.isSelectedSexOthers.bind(Object(x.a)(r)),r.handleSelectSexMale=r.handleSelectSexMale.bind(Object(x.a)(r)),r.handleSelectSexFemale=r.handleSelectSexFemale.bind(Object(x.a)(r)),r.handleSelectSexOthers=r.handleSelectSexOthers.bind(Object(x.a)(r)),r.handleVerify=r.handleVerify.bind(Object(x.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(x.a)(r)),r.handleUserNameChange=r.handleUserNameChange.bind(Object(x.a)(r)),r.handleBirthdayYearChange=r.handleBirthdayYearChange.bind(Object(x.a)(r)),r.handleBirthdayMonthChange=r.handleBirthdayMonthChange.bind(Object(x.a)(r)),r.handleBirthdayDayChange=r.handleBirthdayDayChange.bind(Object(x.a)(r)),r.handleAgreementChange=r.handleAgreementChange.bind(Object(x.a)(r)),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e,t=q(document.querySelectorAll(".signup-form__sns-btn-area"));try{for(t.s();!(e=t.n()).done;){e.value.style.display="none"}}catch(e){t.e(e)}finally{t.f()}}},{key:"handleSubmit",value:function(e){this.props.onFormSubmit(e)}},{key:"handleUserNameChange",value:function(e){this.props.onUserInput("user_name",e.target.value)}},{key:"handleBirthdayYearChange",value:function(e){this.props.onUserInput("birthday_year",e.target.value)}},{key:"handleBirthdayMonthChange",value:function(e){this.props.onUserInput("birthday_month",e.target.value)}},{key:"handleBirthdayDayChange",value:function(e){this.props.onUserInput("birthday_day",e.target.value)}},{key:"handleVerify",value:function(e){this.props.onUserInput("g_recaptcha_response",e)}},{key:"isSelectedSexMale",value:function(){return"1"===this.props.inputValues.sex}},{key:"isSelectedSexFemale",value:function(){return"2"===this.props.inputValues.sex}},{key:"isSelectedSexOthers",value:function(){return"0"===this.props.inputValues.sex}},{key:"isValidUserName",value:function(){return this.isValidField("user_name")}},{key:"isValidField",value:function(e){return!!this.props.validateServerSide&&void 0===this.props.errorsOnInputing[e]}},{key:"isValidationForApple",value:function(){return!0===this.props.isAppIos||"apple"===this.props.snsProviderId}},{key:"hasAgreementError",value:function(){return void 0!==this.props.errors.agreement&&"1"!==this.props.inputValues.agreement}},{key:"handleSelectSexMale",value:function(){this.props.onUserInput("sex","1")}},{key:"handleSelectSexFemale",value:function(){this.props.onUserInput("sex","2")}},{key:"handleSelectSexOthers",value:function(){this.props.onUserInput("sex","0")}},{key:"handleAgreementChange",value:function(e){this.props.onUserInput("agreement",e.target.checked?"1":"0")}},{key:"render",value:function(){var e=this,t=function(e,t){for(var n=[],r=e;r<=t;r++)n.push(Object(i.jsx)("option",{value:r,children:r},r));return n};return Object(i.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(i.jsxs)("fieldset",{className:"_signup-form-text-container",children:[Object(i.jsx)("legend",{children:this.props.t(l.c.signupPersonalInfoStep.userName)}),Object(i.jsxs)("div",{className:"input-field",children:[Object(i.jsx)("input",{type:"text",placeholder:this.props.t(l.c.signupPersonalInfoStep.userName),maxLength:15,autoComplete:"off",autoCapitalize:"off",className:"gtm-user-name",value:this.props.inputValues.user_name,onChange:this.handleUserNameChange}),this.isValidUserName()&&Object(i.jsx)("div",{className:"valid"}),Object(i.jsx)("div",{className:"note",children:Object(i.jsx)("div",{children:this.props.t(l.c.signupPersonalInfoStep.userNameNotes)})})]})]}),Object(i.jsxs)("fieldset",{className:"_signup-form-radio-container gender",children:[Object(i.jsxs)("legend",{children:[this.props.t(l.c.signupPersonalInfoStep.sex),this.isValidationForApple()?"(".concat(this.props.t(l.c.signupPersonalInfoStep.optional),")"):""]}),Object(i.jsxs)("div",{className:"radio-group gender",children:[Object(i.jsx)("input",{type:"radio",name:"sex",value:"1",id:"sex-male",onChange:this.handleSelectSexMale,checked:this.isSelectedSexMale()}),Object(i.jsx)("div",{className:"radio ".concat(this.isSelectedSexMale()?"checked":""),onClick:this.handleSelectSexMale}),Object(i.jsx)("label",{className:"ru"===this.props.lang?"long-label":"",htmlFor:"sex-male",children:this.props.t(l.c.signupPersonalInfoStep.male)})]}),Object(i.jsxs)("div",{className:"radio-group gender",children:[Object(i.jsx)("input",{type:"radio",name:"sex",value:"2",id:"sex-female",onChange:this.handleSelectSexFemale,checked:this.isSelectedSexFemale()}),Object(i.jsx)("div",{className:"radio ".concat(this.isSelectedSexFemale()?"checked":""),onClick:this.handleSelectSexFemale}),Object(i.jsx)("label",{className:"ru"===this.props.lang?"long-label":"",htmlFor:"sex-female",children:this.props.t(l.c.signupPersonalInfoStep.female)})]}),Object(i.jsx)("div",{className:"radio-group gender",children:Object(i.jsxs)("label",{children:[Object(i.jsx)("input",{type:"radio",name:"sex",value:"0",onChange:this.handleSelectSexOthers,checked:this.isSelectedSexOthers()}),Object(i.jsx)("div",{className:"radio ".concat(this.isSelectedSexOthers()?"checked":""),onClick:this.handleSelectSexOthers}),this.props.t(l.c.signupPersonalInfoStep.others)]})})]}),Object(i.jsxs)("fieldset",{children:[Object(i.jsxs)("legend",{children:[this.props.t(l.c.signupPersonalInfoStep.birthdate),this.isValidationForApple()?"(".concat(this.props.t(l.c.signupPersonalInfoStep.optional),")"):""]}),Object(i.jsxs)("div",{className:"_date_selector",children:[Object(i.jsxs)("div",{className:"select-box year",children:[Object(i.jsxs)("select",{autoComplete:"bday-year",value:this.props.inputValues.birthday_year,onChange:this.handleBirthdayYearChange,children:[Object(i.jsx)("option",{value:"",children:this.props.t(l.c.signupPersonalInfoStep.year)}),t(1920,(new Date).getFullYear()-8).reverse()]}),Object(i.jsx)("div",{className:"display-box",children:Object(i.jsx)("div",{className:"selected-value",children:this.props.inputValues.birthday_year||this.props.t(l.c.signupPersonalInfoStep.year)})})]}),Object(i.jsxs)("div",{className:"select-box month",children:[Object(i.jsxs)("select",{autoComplete:"bday-month",value:this.props.inputValues.birthday_month,onChange:this.handleBirthdayMonthChange,children:[Object(i.jsx)("option",{value:"",children:this.props.t(l.c.signupPersonalInfoStep.month)}),t(1,12)]}),Object(i.jsx)("div",{className:"display-box",children:Object(i.jsx)("div",{className:"selected-value",children:this.props.inputValues.birthday_month||this.props.t(l.c.signupPersonalInfoStep.month)})})]}),Object(i.jsxs)("div",{className:"select-box day",children:[Object(i.jsxs)("select",{autoComplete:"bday-day",value:this.props.inputValues.birthday_day,onChange:this.handleBirthdayDayChange,children:[Object(i.jsx)("option",{value:"",children:this.props.t(l.c.signupPersonalInfoStep.day)}),t(1,31)]}),Object(i.jsx)("div",{className:"display-box",children:Object(i.jsx)("div",{className:"selected-value",children:this.props.inputValues.birthday_day||this.props.t(l.c.signupPersonalInfoStep.day)})})]})]})]}),function(){switch(Object(y.a)(this,e),this.props.captchaType){case"ReCaptcha":return Object(i.jsx)(L.a,{id:"g-recaptcha",onVerify:this.handleVerify,recaptchaV2SiteKey:this.props.recaptchaV2SiteKey});default:throw new Error("Invalid captchaType: ".concat(this.props.captchaType))}}.bind(this)(),Object(i.jsxs)("label",{className:"terms-agreement",children:[Object(i.jsxs)("span",{className:"terms-agreement-checkbox",children:[Object(i.jsx)("input",{className:T()("terms-agreement-checkbox-input",{error:this.hasAgreementError()}),type:"checkbox",checked:"1"===this.props.inputValues.agreement,onChange:this.handleAgreementChange}),Object(i.jsx)("span",{className:"terms-agreement-checkbox-ui"})]}),Object(i.jsx)("span",{className:"terms-agreement-text",children:Object(i.jsxs)(l.a,{i18nKey:l.c.signupPersonalInfoStep.agreement,children:[Object(i.jsx)("a",{href:this.props.termsUrl,target:"_blank",rel:"noopener",children:"#"}),Object(i.jsx)("a",{href:this.props.privacyPolicyUrl,target:"_blank",rel:"noopener",children:"#"})]})})]}),Object(i.jsx)(E.a,{errors:this.props.errors,fieldNames:z.fieldNames}),Object(i.jsx)("button",{type:"submit",className:"signup-form__submit",disabled:this.props.requestSending,children:this.props.t(l.c.signupPersonalInfoStep.register)})]})}}]),n}(h.a.Component);W.displayName="SignupPersonalInfoStep";var z=Object(l.f)()(W);z.fieldNames=["user_name","sex","birthday","captcha","mail_address","etc","agreement"];var H=z;function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(w.a)(e);if(t){var a=Object(w.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(O.a)(this,n)}}var Q=function(e){Object(S.a)(p,e);var t,n,r,c,o=G(p);function p(e){var t;return Object(g.a)(this,p),(t=o.call(this,e)).state={step:0,validateServerSide:!1,captchaKey:t.generateCaptchaKey(),requestSending:!1,inputValues:{mail_address:pixivSignup.mailAddress||"",password:"",sex:pixivSignup.sex||"",user_name:pixivSignup.userName||"",birthday_year:pixivSignup.birthdayYear||"",birthday_month:pixivSignup.birthdayMonth||"",birthday_day:pixivSignup.birthdayDay||"",g_recaptcha_response:"",captcha:"",agreement:"0"},errors:{},errorsOnInputing:{}},t.props.errMail&&t.props.errMsg&&(t.state.inputValues.mail_address=t.props.errMail,t.state.errors.mail_address=t.props.errMsg),t.checkValidationOnInputing=Object(V.a)(t.checkValidationOnInputing,500),t.sendStartStepEvent=t.sendStartStepEvent.bind(Object(x.a)(t)),t.sendInputErrorEvent=t.sendInputErrorEvent.bind(Object(x.a)(t)),t.handleFormSubmit=t.handleFormSubmit.bind(Object(x.a)(t)),t.handleUserInput=t.handleUserInput.bind(Object(x.a)(t)),t}return Object(j.a)(p,[{key:"componentDidMount",value:function(){this.sendStartStepEvent(),Object(_.b)(this.props.recaptchaV3SiteKey)}},{key:"getRecaptchaV3Token",value:(c=Object(s.a)(a.a.mark((function e(){var t,n,r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.recaptchaV3SiteKey,s=n.recaptchaV3Action,e.next=3,Object(_.a)(r,s,15e3);case 3:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==t;case 7:if(!e.t0){e.next=11;break}e.t2=t,e.next=12;break;case 11:e.t2="";case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"generateCaptchaKey",value:function(){return(new Date).getTime().toString()}},{key:"handleUserInput",value:function(e,t){var n=this;this.setState(function(r){return Object(y.a)(this,n),{inputValues:$($({},r.inputValues),{},Object(m.a)({},e,t))}}.bind(this),function(){Object(y.a)(this,n);var e=$($({},this.state.inputValues),{},{post_key:this.props.postKey,source:this.props.source,ref:this.props.refParam,only_validation:1,is_validation_for_apple:this.isValidationForApple()?1:0});this.checkValidationOnInputing(e)}.bind(this))}},{key:"checkValidationOnInputing",value:(r=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestSignup(t);case 3:n=e.sent,r=n.body.validation_errors,this.hasValidationErrorsInCurrentStep(r)?this.setState({errorsOnInputing:r,validateServerSide:!0}):this.setState({errors:{},errorsOnInputing:{},validateServerSide:!0}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return r.apply(this,arguments)})},{key:"requestSignup",value:(n=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/signup?lang=".concat(encodeURIComponent(this.props.lang)),{method:"POST",body:C.a.stringify(t),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},credentials:"same-origin",cache:"no-cache"});case 2:if((n=e.sent).ok){e.next=5;break}throw n;case 5:return e.next=7,n.json();case 7:if(!(r=e.sent).error){e.next=10;break}throw r;case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleFormSubmit",value:(t=Object(s.a)(a.a.mark((function e(t){var n,r,s,i,c,o,p,u=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.state.requestSending){e.next=3;break}return e.abrupt("return");case 3:if(this.setState({requestSending:!0}),n=$($({},this.state.inputValues),{},{post_key:this.props.postKey,source:this.props.source,ref:this.props.refParam,only_validation:this.isLastStep()?0:1,is_validation_for_apple:this.isValidationForApple()?1:0}),!this.isLastStep()){e.next=10;break}return e.next=8,this.getRecaptchaV3Token();case 8:n.recaptcha_v3_token=e.sent,n.return_to=this.props.returnTo;case 10:return e.prev=10,e.next=13,this.requestSignup(n);case 13:r=e.sent,s=r.body.validation_errors,!1!==(i=this.getStepHavingValidationErrorsOrFalse(s))?this.setState(function(e){return Object(y.a)(this,u),{step:i,errors:s,errorsOnInputing:s,validateServerSide:!0,inputValues:$($({},e.inputValues),{},{captcha:""}),captchaKey:this.generateCaptchaKey(),requestSending:!1}}.bind(this),this.sendInputErrorEvent):this.isLastStep()?window.ga("send",{hitType:"event",eventCategory:this.props.gaEventCategory,eventAction:"step4",eventLabel:this.props.gaEventLabel,hitCallback:Object(N.a)(function(){Object(y.a)(this,u),Object(P.a)(r.body.success.return_to,r.body.success.return_to_method)}.bind(this))}):this.setState(function(e){return Object(y.a)(this,u),{step:e.step+1,errors:{},validateServerSide:!1,requestSending:!1}}.bind(this),this.sendStartStepEvent),e.next=40;break;case 19:if(e.prev=19,e.t0=e.catch(10),c=function(e){var t=this;Object(y.a)(this,u),this.setState(function(n){return Object(y.a)(this,t),{errors:{etc:[e]},validateServerSide:!1,inputValues:$($({},n.inputValues),{},{captcha:""}),captchaKey:this.generateCaptchaKey(),requestSending:!1}}.bind(this))}.bind(this),!(e.t0 instanceof Response)){e.next=35;break}if(!(e.t0.status>=500)){e.next=26;break}return c(this.props.t(l.c.common.error.serverError)),e.abrupt("return");case 26:return e.next=28,e.t0.json();case 28:if(o=e.sent,!(p=o.message)){e.next=33;break}return c(p),e.abrupt("return");case 33:e.next=38;break;case 35:if(!e.t0.error||!e.t0.message){e.next=38;break}return c(e.t0.message),e.abrupt("return");case 38:throw c(this.props.t(l.c.common.error.exceptionalError)),new Error("signup exceptional error");case 40:return e.prev=40,this.setState({requestSending:!1}),e.finish(40);case 43:case"end":return e.stop()}}),e,this,[[10,19,40,43]])}))),function(e){return t.apply(this,arguments)})},{key:"hasValidationErrorsInCurrentStep",value:function(e){var t=this;if(null==e)return!1;var n=p.stepComponentClasses[this.state.step].fieldNames;return!!Object.keys(e).some(function(e){return Object(y.a)(this,t),n.includes(e)}.bind(this))}},{key:"getStepHavingValidationErrorsOrFalse",value:function(e){if(null==e)return!1;for(var t=function(t){var n=this,r=p.stepComponentClasses[t].fieldNames;if(Object.keys(e).some(function(e){return Object(y.a)(this,n),r.includes(e)}.bind(this)))return{v:t}},n=0;n<=this.state.step;n++){var r=t(n);if("object"===Object(f.a)(r))return r.v}return!1}},{key:"isValidationForApple",value:function(){return!0===this.props.isAppIos||"apple"===this.props.snsProviderId}},{key:"isLastStep",value:function(){return this.state.step===p.stepComponentClasses.length-1}},{key:"sendStartStepEvent",value:function(){if(void 0!==window.ga){var e="step".concat(this.state.step+2);window.ga("send",{hitType:"event",eventCategory:this.props.gaEventCategory,eventAction:e,eventLabel:this.props.gaEventLabel})}}},{key:"sendInputErrorEvent",value:function(){if(void 0!==window.ga){var e="step".concat(this.state.step+2,"-error"),t=Object.keys(this.state.errors).length;window.ga("send",{hitType:"event",eventCategory:this.props.gaEventCategory,eventAction:e,eventLabel:this.props.gaEventLabel,eventValue:t})}}},{key:"render",value:function(){var e=p.stepComponentClasses[this.state.step];return Object(i.jsx)(A.a,{className:"go-next-container",children:Object(i.jsx)(I.a,{classNames:"go-next",timeout:500,children:Object(i.jsx)(e,{lang:this.props.lang,recaptchaV2SiteKey:this.props.recaptchaV2SiteKey,captchaType:this.props.captchaType,inputValues:this.state.inputValues,validateServerSide:this.state.validateServerSide,errors:this.state.errors,errorsOnInputing:this.state.errorsOnInputing,onUserInput:this.handleUserInput,onFormSubmit:this.handleFormSubmit,requestSending:this.state.requestSending,isAppIos:this.props.isAppIos,snsProviderId:this.props.snsProviderId,captchaKey:this.state.captchaKey,termsUrl:this.props.termsUrl,privacyPolicyUrl:this.props.privacyPolicyUrl})},this.state.step)})}}]),p}(h.a.Component);Q.displayName="Signup",Q.stepComponentClasses=[D,H];var X=Object(l.f)()(Q);function Z(){return(Z=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()();case 2:return e.next=4,Object(l.d)(document.documentElement.lang);case 4:if(t=document.getElementById("container-signup")){e.next=7;break}return e.abrupt("return");case 7:window.pixivAccount.shouldSelectAccount?b.a.render(Object(i.jsx)(c.a,{children:Object(i.jsx)(v.a,{continueWithCurrentAccountMethod:window.pixivAccount.continueWithCurrentAccountMethod,continueWithCurrentAccountUrl:window.pixivAccount.continueWithCurrentAccountUrl,currentAccount:window.pixivAccount.currentAccount,gaEventCategory:window.pixivAccount.gaEventCategory,useAnotherAccountLabel:window.pixivAccount.useAnotherAccountLabel,useAnotherAccountUrl:window.pixivAccount.useAnotherAccountUrl})}),t):b.a.render(Object(i.jsx)(c.a,{children:Object(i.jsx)(X,{lang:window.pixivAccount.lang,source:window.pixivAccount.source,recaptchaV2SiteKey:window.pixivAccount.recaptchaV2SiteKey,recaptchaV3Action:window.pixivAccount.recaptchaV3Action,recaptchaV3SiteKey:window.pixivAccount.recaptchaV3SiteKey,postKey:window.pixivAccount.postKey,captchaType:window.pixivAccount.captchaType,returnTo:window.pixivAccount.returnTo,errMail:window.pixivAccount.errMail,errMsg:window.pixivAccount.errMsg,refParam:window.pixivAccount.ref,isAppIos:window.pixivAccount.isAppIos,snsProviderId:window.pixivAccount.snsProviderId,gaEventCategory:window.pixivAccount.gaEventCategory,gaEventLabel:window.pixivAccount.gaEventLabel,termsUrl:window.pixivAccount.termsUrl,privacyPolicyUrl:window.pixivAccount.privacyPolicyUrl})}),t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){Z.apply(this,arguments)}()}},[[343,0,1]]]);